{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Pranav Gupta/OneDrive/Desktop/phone_otp_verification_react_firebase-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Pranav Gupta/OneDrive/Desktop/phone_otp_verification_react_firebase-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Pranav Gupta/OneDrive/Desktop/phone_otp_verification_react_firebase-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BsFillShieldLockFill,BsTelephoneFill}from\"react-icons/bs\";import{CgSpinner}from\"react-icons/cg\";import OtpInput from\"otp-input-react\";import{useState}from\"react\";import PhoneInput from\"react-phone-input-2\";import\"react-phone-input-2/lib/style.css\";import{auth}from\"./firebase.config\";import{RecaptchaVerifier,signInWithPhoneNumber}from\"firebase/auth\";import{toast,Toaster}from\"react-hot-toast\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),ph=_useState4[0],setPh=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showOTP=_useState8[0],setShowOTP=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];function onCaptchVerify(){if(!window.recaptchaVerifier){window.recaptchaVerifier=new RecaptchaVerifier(\"recaptcha-container\",{size:\"invisible\",callback:function callback(response){onSignup();},\"expired-callback\":function expiredCallback(){}},auth);}}function onSignup(){setLoading(true);onCaptchVerify();var appVerifier=window.recaptchaVerifier;var formatPh=\"+\"+ph;signInWithPhoneNumber(auth,formatPh,appVerifier).then(function(confirmationResult){window.confirmationResult=confirmationResult;setLoading(false);setShowOTP(true);toast.success(\"OTP sended successfully!\");}).catch(function(error){console.log(error);setLoading(false);});}function onOTPVerify(){setLoading(true);window.confirmationResult.confirm(otp).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(res);setUser(res.user);setLoading(false);case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){console.log(err);setLoading(false);});}return/*#__PURE__*/_jsx(\"section\",{className:\"bg-emerald-500 flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Toaster,{toastOptions:{duration:4000}}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\"}),user?/*#__PURE__*/_jsx(\"h2\",{className:\"text-center text-white font-medium text-2xl\",children:\"\\uD83D\\uDC4DYou are logged-in\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"w-80 flex flex-col gap-4 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center leading-normal text-white font-medium text-3xl mb-6\",children:[\"Welcome to \",/*#__PURE__*/_jsx(\"br\",{}),\" OTP VALIDATOR PROGRAM\"]}),showOTP?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\",children:/*#__PURE__*/_jsx(BsFillShieldLockFill,{size:30})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"otp\",className:\"font-bold text-xl text-white text-center\",children:\"Enter your OTP\"}),/*#__PURE__*/_jsx(OtpInput,{value:otp,onChange:setOtp,OTPLength:6,otpType:\"number\",disabled:false,autoFocus:true,className:\"opt-container \"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onOTPVerify,className:\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\",children:[loading&&/*#__PURE__*/_jsx(CgSpinner,{size:20,className:\"mt-1 animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Verify OTP\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\",children:/*#__PURE__*/_jsx(BsTelephoneFill,{size:30})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"\",className:\"font-bold text-xl text-white text-center\",children:\"Verify your phone number\"}),/*#__PURE__*/_jsx(PhoneInput,{country:\"in\",value:ph,onChange:setPh}),/*#__PURE__*/_jsxs(\"button\",{onClick:onSignup,className:\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\",children:[loading&&/*#__PURE__*/_jsx(CgSpinner,{size:20,className:\"mt-1 animate-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Send code via SMS\"})]})]})]})]})});};export default App;","map":{"version":3,"names":["BsFillShieldLockFill","BsTelephoneFill","CgSpinner","OtpInput","useState","PhoneInput","auth","RecaptchaVerifier","signInWithPhoneNumber","toast","Toaster","App","otp","setOtp","ph","setPh","loading","setLoading","showOTP","setShowOTP","user","setUser","onCaptchVerify","window","recaptchaVerifier","size","callback","response","onSignup","appVerifier","formatPh","then","confirmationResult","success","catch","error","console","log","onOTPVerify","confirm","res","err","duration"],"sources":["C:/Users/Pranav Gupta/OneDrive/Desktop/phone_otp_verification_react_firebase-main/src/App.js"],"sourcesContent":["import { BsFillShieldLockFill, BsTelephoneFill } from \"react-icons/bs\";\nimport { CgSpinner } from \"react-icons/cg\";\n\nimport OtpInput from \"otp-input-react\";\nimport { useState } from \"react\";\nimport PhoneInput from \"react-phone-input-2\";\nimport \"react-phone-input-2/lib/style.css\";\nimport { auth } from \"./firebase.config\";\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\nimport { toast, Toaster } from \"react-hot-toast\";\n\nconst App = () => {\n  const [otp, setOtp] = useState(\"\");\n  const [ph, setPh] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [showOTP, setShowOTP] = useState(false);\n  const [user, setUser] = useState(null);\n\n  function onCaptchVerify() {\n    if (!window.recaptchaVerifier) {\n      window.recaptchaVerifier = new RecaptchaVerifier(\n        \"recaptcha-container\",\n        {\n          size: \"invisible\",\n          callback: (response) => {\n            onSignup();\n          },\n          \"expired-callback\": () => {},\n        },\n        auth\n      );\n    }\n  }\n\n  function onSignup() {\n    setLoading(true);\n    onCaptchVerify();\n\n    const appVerifier = window.recaptchaVerifier;\n\n    const formatPh = \"+\" + ph;\n\n    signInWithPhoneNumber(auth, formatPh, appVerifier)\n      .then((confirmationResult) => {\n        window.confirmationResult = confirmationResult;\n        setLoading(false);\n        setShowOTP(true);\n        toast.success(\"OTP sended successfully!\");\n      })\n      .catch((error) => {\n        console.log(error);\n        setLoading(false);\n      });\n  }\n\n  function onOTPVerify() {\n    setLoading(true);\n    window.confirmationResult\n      .confirm(otp)\n      .then(async (res) => {\n        console.log(res);\n        setUser(res.user);\n        setLoading(false);\n      })\n      .catch((err) => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n\n  return (\n    <section className=\"bg-emerald-500 flex items-center justify-center h-screen\">\n      <div>\n        <Toaster toastOptions={{ duration: 4000 }} />\n        <div id=\"recaptcha-container\"></div>\n        {user ? (\n          <h2 className=\"text-center text-white font-medium text-2xl\">\n            üëçYou are logged-in\n          </h2>\n        ) : (\n          <div className=\"w-80 flex flex-col gap-4 rounded-lg p-4\">\n            <h1 className=\"text-center leading-normal text-white font-medium text-3xl mb-6\">\n              Welcome to <br /> OTP VALIDATOR PROGRAM\n            </h1>\n            {showOTP ? (\n              <>\n                <div className=\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\">\n                  <BsFillShieldLockFill size={30} />\n                </div>\n                <label\n                  htmlFor=\"otp\"\n                  className=\"font-bold text-xl text-white text-center\"\n                >\n                  Enter your OTP\n                </label>\n                <OtpInput\n                  value={otp}\n                  onChange={setOtp}\n                  OTPLength={6}\n                  otpType=\"number\"\n                  disabled={false}\n                  autoFocus\n                  className=\"opt-container \"\n                ></OtpInput>\n                <button\n                  onClick={onOTPVerify}\n                  className=\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\"\n                >\n                  {loading && (\n                    <CgSpinner size={20} className=\"mt-1 animate-spin\" />\n                  )}\n                  <span>Verify OTP</span>\n                </button>\n              </>\n            ) : (\n              <>\n                <div className=\"bg-white text-emerald-500 w-fit mx-auto p-4 rounded-full\">\n                  <BsTelephoneFill size={30} />\n                </div>\n                <label\n                  htmlFor=\"\"\n                  className=\"font-bold text-xl text-white text-center\"\n                >\n                  Verify your phone number\n                </label>\n                <PhoneInput country={\"in\"} value={ph} onChange={setPh} />\n                <button\n                  onClick={onSignup}\n                  className=\"bg-emerald-600 w-full flex gap-1 items-center justify-center py-2.5 text-white rounded\"\n                >\n                  {loading && (\n                    <CgSpinner size={20} className=\"mt-1 animate-spin\" />\n                  )}\n                  <span>Send code via SMS</span>\n                </button>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}